# ğŸš€ Phase 4 é–‹ç™¼æŒ‡å— - ç„¡ç¬¦è™Ÿç®—è¡“æŒ‡ä»¤ç¾¤çµ„

## ğŸ“‹ ç•¶å‰ç‹€æ…‹ç¸½çµ (2025å¹´8æœˆ15æ—¥æ›´æ–°)

### âœ… Phase 3 å®Œæˆæˆæœ
- **BGTZæŒ‡ä»¤å¯¦ç¾å®Œæˆ:** 232å€‹æ¸¬è©¦å…¨éƒ¨é€šé
- **åˆ†æ”¯æŒ‡ä»¤ç¾¤çµ„100%å®Œæˆ:** BLEZ + BGTZ é›™æŒ‡ä»¤å…¨é¢å¯¦ç¾
- **æ¸¬è©¦å¢é•·:** å¾219å€‹å¢åŠ åˆ°232å€‹æ¸¬è©¦ (+13å€‹æ¸¬è©¦)
- **å®Œæˆåº¦æå‡:** å¾52%æå‡åˆ°53% (25/47æŒ‡ä»¤å®Œæˆ)

### ğŸ¯ Phase 4 ç›®æ¨™ï¼šç„¡ç¬¦è™Ÿç®—è¡“æŒ‡ä»¤ç¾¤çµ„

#### ç›®æ¨™æŒ‡ä»¤æ¸…å–®
1. **ADDIU** (Add Immediate Unsigned) - I-type æŒ‡ä»¤
   - **Opcode:** 0x09
   - **èªæ³•:** `addiu $rt, $rs, immediate`
   - **åŠŸèƒ½:** rt = rs + sign_extend(immediate) (ç„¡æº¢ä½æª¢æŸ¥)
   
2. **SUBU** (Subtract Unsigned) - R-type æŒ‡ä»¤
   - **Function Code:** 0x23
   - **èªæ³•:** `subu $rd, $rs, $rt`
   - **åŠŸèƒ½:** rd = rs - rt (ç„¡æº¢ä½æª¢æŸ¥)

3. **ADDU** (Add Unsigned) - R-type æŒ‡ä»¤
   - **Function Code:** 0x21
   - **èªæ³•:** `addu $rd, $rs, $rt`
   - **åŠŸèƒ½:** rd = rs + rt (ç„¡æº¢ä½æª¢æŸ¥)

## ğŸ¯ BDDé–‹ç™¼è¨ˆåŠƒ

### Phase 4.1: ADDIUæŒ‡ä»¤ (Red-Light â†’ Green-Light â†’ Integration)

**é–‹ç™¼é †åº:**
1. **Red-Light Phase:** å‰µå»º `tests/test_addiu_instruction_bdd_minimal.cpp` (4å€‹DISABLEDæ¸¬è©¦)
2. **Green-Light Phase:** å¯¦ç¾ADDIUæŒ‡ä»¤é¡åˆ¥å’Œæ ¸å¿ƒçµ„ä»¶
3. **Integration Phase:** å‰µå»ºIntegrationæ¸¬è©¦

**é—œéµæŠ€è¡“è¦é»:**
- **ç„¡æº¢ä½æª¢æŸ¥:** ä¸ç”¢ç”Ÿç®—è¡“æº¢ä½ç•°å¸¸
- **æœ‰ç¬¦è™Ÿæ“´å±•:** å„˜ç®¡åç¨±ç‚º"unsigned"ï¼Œç«‹å³å€¼ä»ä½¿ç”¨æœ‰ç¬¦è™Ÿæ“´å±•
- **åƒè€ƒå¯¦ç¾:** å¯åƒè€ƒADDIæŒ‡ä»¤çš„å¯¦ç¾æ¨¡å¼

### Phase 4.2: SUBUæŒ‡ä»¤ (R-typeå¯¦ç¾)

**é–‹ç™¼é‡é»:**
- R-typeæŒ‡ä»¤æ ¼å¼
- ç„¡ä¸‹æº¢æª¢æŸ¥é‚è¼¯
- åƒè€ƒSUBæŒ‡ä»¤å¯¦ç¾

### Phase 4.3: ADDUæŒ‡ä»¤ (R-typeå¯¦ç¾)

**é–‹ç™¼é‡é»:**
- R-typeæŒ‡ä»¤æ ¼å¼ 
- ç„¡æº¢ä½æª¢æŸ¥é‚è¼¯
- åƒè€ƒADDæŒ‡ä»¤å¯¦ç¾

## ğŸ“Š é æœŸæˆæœ

### é‡åŒ–ç›®æ¨™
- **æ–°å¢æ¸¬è©¦æ•¸:** +18-21å€‹æ¸¬è©¦ (232 â†’ 250-253)
- **æŒ‡ä»¤å®Œæˆ:** 3å€‹ç„¡ç¬¦è™Ÿç®—è¡“æŒ‡ä»¤
- **å®Œæˆåº¦æå‡:** 53% â†’ 60%
- **ä¼°è¨ˆé–‹ç™¼æ™‚é–“:** 6-8å°æ™‚

### å®Œæˆæ¨™æº–
- **åŠŸèƒ½é©—è­‰:** æ‰€æœ‰3å€‹æŒ‡ä»¤æ­£ç¢ºå¯¦ç¾ç„¡æº¢ä½ç®—è¡“
- **æ¸¬è©¦è¦†è“‹:** å®Œæ•´BDD + Integrationæ¸¬è©¦
- **å›æ­¸ç©©å®š:** æ‰€æœ‰ç¾æœ‰232å€‹æ¸¬è©¦ç¹¼çºŒé€šé
- **é›¶ç·¨è­¯éŒ¯èª¤:** å®Œæ•´ç·¨è­¯æˆåŠŸ

## ğŸš€ ç«‹å³è¡Œå‹•è¨ˆåŠƒ

### Step 1: ç’°å¢ƒé©—è­‰ (5åˆ†é˜)
```bash
cd c:\Users\aloha\Documents\GitHub\MIPS-Assembly-Simulator\build
.\tests\unit_tests.exe --gtest_brief
# ç¢ºèªé¡¯ç¤º: [  PASSED  ] 232 tests
```

### Step 2: é–‹å§‹ADDIUé–‹ç™¼ (45åˆ†é˜)
1. å‰µå»º `tests/test_addiu_instruction_bdd_minimal.cpp`
2. å¯¦ç¾4å€‹DISABLED_æ¸¬è©¦å ´æ™¯
3. æ›´æ–°CMakeLists.txt
4. ç·¨è­¯ç¢ºèªç´…ç‡ˆç‹€æ…‹

### Step 3: ADDIUå¯¦ç¾ (60åˆ†é˜)
1. åœ¨ `src/Instruction.h` æ·»åŠ ADDIUInstructioné¡åˆ¥
2. åœ¨ `src/Instruction.cpp` å¯¦ç¾execute()æ–¹æ³•
3. åœ¨ `src/InstructionDecoder.cpp` æ·»åŠ case 0x09
4. åœ¨ `src/Assembler.cpp` æ·»åŠ "addiu"èªæ³•è§£æ
5. ç§»é™¤DISABLED_å‰ç¶´ï¼Œç¢ºèªç¶ ç‡ˆç‹€æ…‹

### Step 4: Integrationæ¸¬è©¦ (30åˆ†é˜)
1. å‰µå»º `tests/test_addiu_instruction_integration.cpp`
2. å¯¦ç¾è§£ç¢¼å™¨å’Œçµ„è­¯å™¨æ•´åˆæ¸¬è©¦
3. å®Œæ•´å›æ­¸æ¸¬è©¦ç¢ºèª

## ğŸ“ åƒè€ƒæ–‡ä»¶

### å¯¦ç¾åƒè€ƒ
- **ADDIå¯¦ç¾:** `src/Instruction.cpp` ä¸­çš„ADDIInstructioné¡åˆ¥
- **I-typeè§£ç¢¼:** `src/InstructionDecoder.cpp` ä¸­çš„I-typeè™•ç†
- **èªæ³•è§£æ:** `src/Assembler.cpp` ä¸­çš„ç«‹å³å€¼æŒ‡ä»¤è§£æ

### æ¸¬è©¦åƒè€ƒ
- **BDDæ¨¡å¼:** `tests/test_addi_instruction_bdd_minimal.cpp` (å¦‚æœå­˜åœ¨)
- **Integrationæ¨¡å¼:** ä»»ä½•ç¾æœ‰çš„Integrationæ¸¬è©¦æ–‡ä»¶

## ğŸ¯ æˆåŠŸæŒ‡æ¨™

### Phase 4å®Œæˆæª¢æ ¸æ¸…å–®
- [ ] ADDIUæŒ‡ä»¤100%å¯¦ç¾ (BDD + Integration)
- [ ] SUBUæŒ‡ä»¤100%å¯¦ç¾ (BDD + Integration) 
- [ ] ADDUæŒ‡ä»¤100%å¯¦ç¾ (BDD + Integration)
- [ ] ç¸½æ¸¬è©¦æ•¸é”åˆ°250å€‹ä»¥ä¸Š
- [ ] å®Œæˆåº¦é”åˆ°60%
- [ ] é›¶ç·¨è­¯è­¦å‘Šå’ŒéŒ¯èª¤
- [ ] å®Œæ•´å›æ­¸æ¸¬è©¦é€šé

### Phase 5æº–å‚™
å®ŒæˆPhase 4å¾Œï¼Œä¸‹ä¸€éšæ®µå°‡é€²å…¥ï¼š
- **Phase 5:** è®Šæ•¸ä½ç§»æŒ‡ä»¤ç¾¤çµ„ (SLLV, SRLV, SRAV)
- **ç›®æ¨™æ¸¬è©¦æ•¸:** 250 â†’ 268å€‹æ¸¬è©¦
- **å®Œæˆåº¦ç›®æ¨™:** 60% â†’ 66%

---

**ğŸ¯ ä¸‹ä¸€ä½é–‹ç™¼è€…ç«‹å³ä»»å‹™:** é–‹å§‹ADDIUæŒ‡ä»¤BDD Red-Light Phaseé–‹ç™¼
**é æœŸæ™‚é–“æŠ•å…¥:** 2-3å°æ™‚å®ŒæˆADDIUæŒ‡ä»¤
**é—œéµåŸå‰‡:** åš´æ ¼éµå¾ªBDD red-light â†’ green-light â†’ refactoré€±æœŸ
