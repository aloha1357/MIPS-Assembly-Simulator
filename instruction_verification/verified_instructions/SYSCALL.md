# SYSCALL 指令驗證報告

## 基本資訊
- **指令名稱**: SYSCALL (系統呼叫)
- **類別**: 系統指令  
- **驗證狀態**: ✅ 已驗證通過
- **驗證日期**: 2025-09-10
- **重要發現**: 完全支援，與之前假設相反

## 指令格式
```
syscall
```

## 功能說明
執行標準 MIPS 系統呼叫，通過暫存器傳遞系統呼叫號碼和參數。

## 使用方式
- `$v0`: 系統呼叫號碼
- `$a0-$a3`: 系統呼叫參數
- 執行 `syscall` 指令

## 支援的系統呼叫

### Syscall 1: print_int
**功能**: 列印整數  
**參數**: $a0 = 要列印的整數  
**系統呼叫號碼**: 1

```assembly
lhi $t0, 0
llo $t0, 42
or $a0, $t0, $zero   # 設定要列印的值
lhi $v0, 0
llo $v0, 1           # 系統呼叫號碼 1
syscall              # 執行系統呼叫
```

### Syscall 10: exit
**功能**: 結束程式  
**參數**: 無  
**系統呼叫號碼**: 10

```assembly
lhi $v0, 0
llo $v0, 10          # 系統呼叫號碼 10
syscall              # 結束程式
```

## 測試案例

### 測試 1: print_int 系統呼叫
```assembly
lhi $t0, 0
llo $t0, 25
or $a0, $t0, $zero
lhi $v0, 0
llo $v0, 1
syscall              # 輸出: 25
```
**預期結果**: 25  
**實際結果**: 25  
**狀態**: ✅ 通過

### 測試 2: 多次 print_int
```assembly
# 第一次輸出
lhi $t0, 0
llo $t0, 25
or $a0, $t0, $zero
lhi $v0, 0
llo $v0, 1
syscall              # 輸出: 25

# 第二次輸出  
lhi $t1, 0
llo $t1, 35
or $a0, $t1, $zero
lhi $v0, 0
llo $v0, 1
syscall              # 輸出: 35
```
**預期結果**: 25, 35  
**實際結果**: 25, 35  
**狀態**: ✅ 通過

### 測試 3: exit 系統呼叫
```assembly
lhi $v0, 0
llo $v0, 10
syscall              # 正常結束
```
**預期結果**: 程式正常結束  
**實際結果**: 程式正常結束  
**狀態**: ✅ 通過

## 與 TRAP 指令比較

| 特性 | SYSCALL | TRAP |
|------|---------|------|
| 標準性 | 標準 MIPS | 自定義擴展 |
| 參數傳遞 | 透過 $v0, $a0-$a3 | 直接指定功能名 |
| 使用複雜度 | 較複雜 | 較簡單 |
| 註解敏感性 | 無問題 | 對註解格式敏感 |
| 功能擴展性 | 容易擴展 | 固定功能 |

## 使用注意事項
1. **暫存器設定**: 必須正確設定 $v0 和相關參數暫存器
2. **系統呼叫號碼**: 使用正確的號碼 (1=print_int, 10=exit)
3. **參數準備**: print_int 需要在 $a0 中準備要列印的值
4. **相容性**: 符合標準 MIPS 系統呼叫介面

## 支援狀態澄清
**之前的假設**: SYSCALL 不支援  
**驗證結果**: SYSCALL 完全支援且功能正常  
**結論**: 需要更新文檔，SYSCALL 是完全可用的功能

## 相關指令
- TRAP: 簡化版系統呼叫
- LHI/LLO: 用於設定系統呼叫號碼
- OR: 用於設定參數暫存器

## 測試檔案位置
- `instruction_verification/test_cases/test_syscall_no_comments.asm`
- `test_syscall.asm`: 原始測試檔案
